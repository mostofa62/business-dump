<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/layout}">
<head>
<title>List user</title>
</head>
<div layout:fragment="content" id="content">
<div class="row">
<div class="col-12">
<div class="card">
<div class="card-header">
<h4 class="card-title">List user</h4>
</div>
<div class="card-body">
<a href="/user/create" class="card-title btn btn-primary">New user</a>


<div class="table-responsive">
<table id="grid" class="table table-striped border">
<thead>
    <tr>
       <!--  <th>ID</th> -->
        <th>Full Name</th>
        <th>Login Name</th>
        <th>Role</th>
        <th>LEVEL</th>
        <th>INITIAL BALANCE</th>        		       
        <th></th>
    </tr>
</thead>


</table>
</div>

</div>

</div>
</div>
</div>



</div>

<th:block layout:fragment="styles">
<link rel="stylesheet" type="text/css"  href="/themefiles/assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.css" />
</th:block>


<th:block layout:fragment="scripts">
<script src="/themefiles/assets/extra-libs/DataTables/datatables.min.js"></script>
<script type="text/javascript" src="/js/fnFilterOnReturn.js"></script>
<script type="text/javascript" src="/js/jquery.spring-friendly.js"></script>
<script th:inline="javascript">
/*<![CDATA[*/

	
	$("table#grid").dataTable({ 
		pagingType : 'full_numbers',
		lengthMenu : [ [2, 5, 10], [2, 5, 10] ],
		autoWidth: false,
		ajax: {
			
			url: '/api/user',
			
		},
		
		
		
	
		/*
	    ajax: {
	        contentType: 'application/json',
	        url: '/api/customers',
	        type: 'POST',
	        data: function(d) {
	          return JSON.stringify(d);
	        }
	    },
	    */
	    processing:true,
	    serverSide: true,
    
	    columns: [
	       /*  {
	            data: 'id'
	        }, */
	        {
	            data: 'fullName'
	        },
	        {
	            data: 'userName'
	        },
	        {
	            data: 'role.name'
	        },
	        {
	            data: 'rLevel'
	        },
	        
	        
	        {
	        	data:null,
	        	sortable: false,
	        	searchable: false,
	        	render: function (data, type, row) {
	        		//console.log(row);
	                return '<a class="table-edit btn btn-info" data-id="' + row.id + '" href="/user/update/'+row.id+'">UPDATE</a>'
	                +'<a class="table-edit btn btn-info" data-id="' + row.areaUser.id + '" href="/rate/create/'+row.areaUser.id+'">RATE</a>'
	                ;
	                
	            }
	        }
	    ]
	}).fnFilterOnReturn();	


/*]]>*/
</script>
</th:block>